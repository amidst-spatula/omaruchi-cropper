# omaruchi-cropper (NIKKE キャラクター切り抜き器)

勝利の女神：NIKKEの「協同作戦」リザルト画面（キャラ選択画面）のスクリーンショットから、各プレイヤーが選択したキャラクター部分のみを綺麗に抽出・整列・合成するWebアプリです。

## 🚀 主な機能

- **精密な自動切り抜き**: NIKKEのUI（9:16セーフエリア）に基づいた座標計算により、キャラクター部分を正確に抽出します。
- **プレイヤーごとの自動整列**: 複数のスクリーンショットをアップロードした際、プレイヤー名の見た目の類似度を解析し、同じプレイヤーが同じ列に並ぶように自動でソートします。
- **直感的な位置調整**: プレビュー画像を上下にドラッグするだけで、ノッチやステータスバーによるズレをピクセル単位で微調整できます。
- **モバイル最適化**: `env(safe-area-inset-top)` によるデッドゾーンの自動補正に対応。スマホからでも快適に操作可能です。
- **設定の保存**: 一度調整した位置情報はブラウザ（LocalStorage）に保存され、次回以降もそのまま使えます。
- **一括合成**: 全てのスクリーンショットを1枚のグリッド画像にまとめてダウンロードできます。

## 🛠 技術スタック

- **Frontend**: Pure HTML5 / CSS3 / JavaScript (ES6+)
- **No Dependencies**: 外部ライブラリを一切使用していないため、軽量で高速に動作します。
- **Canvas API**: 高度な画像処理と合成をブラウザ上のみで完結させています（サーバーへ画像は送信されません）。

## 📖 使い方

1.  **画像を選択**: 「画像を選択（複数可）」ボタンから、協同作戦のスクリーンショットを1枚以上アップロードします。
2.  **位置を調整（必要な場合）**:
    - 「位置調整を表示」ボタンを押し、表示されたプレビュー画像を上下にドラッグして、枠がキャラクターにぴったり重なるように合わせます。
    - 設定は自動で保存されます。
3.  **保存**: 下部に生成された合成画像をタップ（または右クリック）して保存します。

## 📂 ファイル構成

- `index.html`: メインUI構造
- `style.css`: NIKKE風のダークテーマ・スタイリング
- `app.js`: 画像処理・自動整列・ドラッグ調整ロジック
- `spec.md`: 詳細な技術仕様書（作成済み）

## 🌐 ローカルでの動かし方

静的なHTMLファイルのみで構成されているため、サーバーなしでも動作しますが、スマホからの動作確認にはローカルサーバーの使用を推奨します。

```bash
# Pythonを使用する場合
python3 -m http.server 8000

# Node.js (npx) を使用する場合
npx serve .
```

起動後、表示されたIPアドレスにスマホのブラウザからアクセスしてください。
